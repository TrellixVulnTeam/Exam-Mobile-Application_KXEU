package com.yorbax.EMA.lecturer.activity;import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import android.os.Bundle;import android.view.LayoutInflater;import android.view.View;import android.widget.LinearLayout;import android.widget.RadioButton;import android.widget.TextView;import android.widget.Toast;import com.google.android.gms.tasks.OnCompleteListener;import com.google.android.gms.tasks.Task;import com.google.android.material.button.MaterialButton;import com.google.android.material.textfield.TextInputEditText;import com.google.firebase.auth.FirebaseAuth;import com.google.firebase.database.DatabaseReference;import com.yorbax.EMA.R;import com.yorbax.EMA.lecturer.model.MCQsModel;import com.yorbax.EMA.lecturer.model.McqsDetail;import java.util.ArrayList;import java.util.List;import java.util.UUID;import static com.yorbax.EMA.Constants.Constants.mDatabase;public class AddExam extends AppCompatActivity {    MaterialButton btnCreate, btnSave;    TextInputEditText edMcqs;    int noMcqs=0;    LinearLayout options_layout;    DatabaseReference databaseReference;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_add_exam);        edMcqs=findViewById(R.id.txt_name);        btnCreate=findViewById(R.id.createMcqs);        btnSave=findViewById(R.id.btnSave);        databaseReference = mDatabase;        btnCreate.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                if(edMcqs.getText().toString().isEmpty()){                    return;                }                noMcqs= Integer.parseInt(edMcqs.getText().toString());                 options_layout = (LinearLayout) findViewById(R.id.dynamicLy);                for (int i = 0; i <noMcqs; i++) {                    View to_add = LayoutInflater.from(AddExam.this).inflate(R.layout.row_mcqs,                            options_layout,false);                    TextView text = (TextView) to_add.findViewById(R.id.mcqsNo);                    text.setText("MCQs No: #"+(i+1));                    options_layout.addView(to_add);                }            }        });        btnSave.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                List<McqsDetail> mcqsDetails=new ArrayList<>();                for(int i=0;i<options_layout.getChildCount();i++){                  TextView tv_msqsno=options_layout.getChildAt(i).findViewById(R.id.mcqsNo);                  TextInputEditText etQuestion=options_layout.getChildAt(i).findViewById(R.id.txt_name);                  TextInputEditText opt1=options_layout.getChildAt(i).findViewById(R.id.et_opt_1);                  TextInputEditText opt2=options_layout.getChildAt(i).findViewById(R.id.txt_opt_2);                  TextInputEditText opt3=options_layout.getChildAt(i).findViewById(R.id.txt_opt_3);                  TextInputEditText opt4=options_layout.getChildAt(i).findViewById(R.id.txt_opt_4);                  RadioButton rd1=options_layout.getChildAt(i).findViewById(R.id.rd_op1);                  RadioButton rd2=options_layout.getChildAt(i).findViewById(R.id.rd_op2);                  RadioButton rd3=options_layout.getChildAt(i).findViewById(R.id.rd_op3);                  RadioButton rd4=options_layout.getChildAt(i).findViewById(R.id.rd_op4);                  String correctAnswer="1";                  if(rd1.isChecked()){                      correctAnswer="1";                  }else if(rd2.isChecked()){                      correctAnswer="2";                  }else if(rd3.isChecked()){                      correctAnswer="3";                  }else if(rd4.isChecked()){                      correctAnswer="4";                  }                    mcqsDetails.add(new McqsDetail(null,etQuestion.getText().toString(),opt1.getText().toString(),                            opt2.getText().toString(),opt3.getText().toString(),opt4.getText().toString(),correctAnswer));                }                String examID=UUID.randomUUID().toString();            addMcqs(examID,new MCQsModel(examID,noMcqs+"","10",mcqsDetails, FirebaseAuth.getInstance().getCurrentUser().getUid()));            }        });    }    void addMcqs(String examID,MCQsModel mcQsModel) {        databaseReference.child("Exam").child(examID).setValue(mcQsModel).addOnCompleteListener(new OnCompleteListener<Void>() {            @Override            public void onComplete(@NonNull Task<Void> task) {                if (task.isSuccessful()) {                    Toast.makeText(AddExam.this, "MCQs Created Successfully!", Toast.LENGTH_SHORT).show();                    finish();                } else {                    Toast.makeText(AddExam.this, "Something goes wrong please try again", Toast.LENGTH_SHORT).show();                }            }        });    }}